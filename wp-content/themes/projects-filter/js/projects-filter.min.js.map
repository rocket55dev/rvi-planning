{"version":3,"file":"/blocks/projects-filter/js/projects-filter.min.js","mappings":"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","sources":["webpack://rocket55-starter/./blocks/projects-filter/js/projects-filter.js"],"sourcesContent":["/**\n * Projects Filter Block JavaScript\n * Handles subsector filtering with Shuffle.js and Ajax load more functionality\n */\n\n(function() {\n\t'use strict';\n\n\t// Initialize when DOM is ready (front-end)\n\tif (document.readyState === 'loading') {\n\t\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\t\tif (typeof Shuffle !== 'undefined') {\n\t\t\t\tconst blocks = document.querySelectorAll('.projects-filter');\n\t\t\t\tblocks.forEach(function(block) {\n\t\t\t\t\tinitProjectsFilter(block);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tif (typeof Shuffle !== 'undefined') {\n\t\t\tconst blocks = document.querySelectorAll('.projects-filter');\n\t\t\tblocks.forEach(function(block) {\n\t\t\t\tinitProjectsFilter(block);\n\t\t\t});\n\t\t}\n\t}\n\n\t// Initialize in ACF block editor\n\tif (window.acf) {\n\t\twindow.acf.addAction('render_block_preview/type=projects-filter', function($block) {\n\t\t\tif ($block && $block[0] && $block[0].querySelector('.projects-filter')) {\n\t\t\t\tif (typeof Shuffle !== 'undefined') {\n\t\t\t\t\tconst blockElement = $block[0].querySelector('.projects-filter');\n\t\t\t\t\tinitProjectsFilter(blockElement);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction initProjectsFilter(block) {\n\t\t// Skip if already initialized\n\t\tif (block.classList.contains('projects-filter-initialized')) {\n\t\t\treturn;\n\t\t}\n\t\tblock.classList.add('projects-filter-initialized');\n\t\tconst filterTags = block.querySelectorAll('.projects-filter-tag');\n\t\tconst loadMoreBtn = block.querySelector('.projects-filter-load-more');\n\t\tconst projectsGrid = block.querySelector('.projects-filter-grid');\n\n\t\t// Initialize Shuffle.js\n\t\tconst shuffleInstance = new Shuffle(projectsGrid, {\n\t\t\titemSelector: '.projects-filter-item',\n\t\t\tspeed: 400,\n\t\t\teasing: 'cubic-bezier(0.4, 0.0, 0.2, 1)',\n\t\t});\n\n\t\tlet activeSubsector = null;\n\n\t\t// Subsector filter toggle (single selection only)\n\t\tfilterTags.forEach(function(tag) {\n\t\t\ttag.addEventListener('click', function() {\n\t\t\t\tconst subsectorId = this.getAttribute('data-subsector-id');\n\t\t\t\tconst isPressed = this.getAttribute('aria-pressed') === 'true';\n\n\t\t\t\tif (isPressed) {\n\t\t\t\t\t// Deselect this tag\n\t\t\t\t\tthis.setAttribute('aria-pressed', 'false');\n\t\t\t\t\tactiveSubsector = null;\n\t\t\t\t} else {\n\t\t\t\t\t// Deselect all other tags\n\t\t\t\t\tfilterTags.forEach(function(t) {\n\t\t\t\t\t\tt.setAttribute('aria-pressed', 'false');\n\t\t\t\t\t});\n\t\t\t\t\t// Select this tag\n\t\t\t\t\tthis.setAttribute('aria-pressed', 'true');\n\t\t\t\t\tactiveSubsector = subsectorId;\n\t\t\t\t}\n\n\t\t\t\tfilterProjects();\n\t\t\t});\n\t\t});\n\n\t\t// Filter projects using Shuffle.js\n\t\tfunction filterProjects() {\n\t\t\tif (activeSubsector === null) {\n\t\t\t\t// Show all projects\n\t\t\t\tshuffleInstance.filter(Shuffle.ALL_ITEMS);\n\t\t\t} else {\n\t\t\t\t// Show only projects matching active subsector\n\t\t\t\tshuffleInstance.filter(function(element) {\n\t\t\t\t\tconst groups = element.getAttribute('data-groups');\n\n\t\t\t\t\tif (!groups || groups === '[]') {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst groupArray = JSON.parse(groups);\n\t\t\t\t\t\treturn groupArray.includes(activeSubsector);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Load More functionality (only on front-end where Ajax data is available)\n\t\tif (loadMoreBtn && typeof projectsFilterData !== 'undefined') {\n\t\t\tloadMoreBtn.addEventListener('click', function() {\n\t\t\t\tconst currentPage = parseInt(this.getAttribute('data-page'));\n\t\t\t\tconst maxPages = parseInt(this.getAttribute('data-max-pages'));\n\t\t\t\tconst nextPage = currentPage + 1;\n\t\t\t\tconst sectorId = block.getAttribute('data-sector-id');\n\t\t\t\tconst postsPerPage = block.getAttribute('data-posts-per-page');\n\n\t\t\t\t// Disable button while loading\n\t\t\t\tthis.disabled = true;\n\t\t\t\tthis.textContent = 'Loading...';\n\n\t\t\t\t// Make Ajax request\n\t\t\t\tconst formData = new FormData();\n\t\t\t\tformData.append('action', 'load_more_projects');\n\t\t\t\tformData.append('page', nextPage);\n\t\t\t\tformData.append('sector_id', sectorId);\n\t\t\t\tformData.append('posts_per_page', postsPerPage);\n\t\t\t\tformData.append('nonce', projectsFilterData.nonce);\n\n\t\t\t\tfetch(projectsFilterData.ajax_url, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tbody: formData\n\t\t\t\t})\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(data => {\n\t\t\t\t\tif (data.success && data.data.html) {\n\t\t\t\t\t\t// Append new posts to grid\n\t\t\t\t\t\tprojectsGrid.insertAdjacentHTML('beforeend', data.data.html);\n\n\t\t\t\t\t\t// Update button state\n\t\t\t\t\t\tif (nextPage >= maxPages) {\n\t\t\t\t\t\t\t// No more pages, hide button\n\t\t\t\t\t\t\tloadMoreBtn.style.display = 'none';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Update page number\n\t\t\t\t\t\t\tloadMoreBtn.setAttribute('data-page', nextPage);\n\t\t\t\t\t\t\tloadMoreBtn.disabled = false;\n\t\t\t\t\t\t\tloadMoreBtn.textContent = 'See More';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('Error loading more projects');\n\t\t\t\t\t\tloadMoreBtn.disabled = false;\n\t\t\t\t\t\tloadMoreBtn.textContent = 'See More';\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tconsole.error('Ajax error:', error);\n\t\t\t\t\tloadMoreBtn.disabled = false;\n\t\t\t\t\tloadMoreBtn.textContent = 'See More';\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n})();"],"names":["document","readyState","addEventListener","Shuffle","blocks","querySelectorAll","forEach","block","initProjectsFilter","window","acf","addAction","$block","querySelector","blockElement","classList","contains","add","filterTags","loadMoreBtn","projectsGrid","shuffleInstance","itemSelector","speed","easing","activeSubsector","tag","subsectorId","getAttribute","isPressed","setAttribute","t","filterProjects","filter","ALL_ITEMS","element","groups","groupArray","JSON","parse","includes","e","projectsFilterData","currentPage","parseInt","maxPages","nextPage","sectorId","postsPerPage","disabled","textContent","formData","FormData","append","nonce","fetch","ajax_url","method","body","then","response","json","data","success","html","insertAdjacentHTML","style","display","console","error"],"sourceRoot":""}